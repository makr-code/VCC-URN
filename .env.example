# Example environment variables for VCC-URN
# Copy to .env and adjust as needed

# Database URL (SQLite file default)
URN_DB_URL=sqlite:///./urn_manifest.db

# Namespace Identifier
URN_NID=de

# State code regex (lowercase)
URN_STATE_RE=^[a-z]{2,3}$

# CORS origins (comma-separated). Use * only for development.
URN_CORS_ORIGINS=http://localhost:3000

# Federation: peers mapping (state=baseUrl)
# Example: URN_PEERS=nrw=https://nrw.resolver.example,by=https://by.resolver.example
URN_PEERS=

# Federation request timeout (seconds)
URN_FED_TIMEOUT=3.0

# Federation cache TTL (seconds)
URN_FED_CACHE_TTL=300

# Auth
# none | apikey | oidc
URN_AUTH_MODE=none
# When using apikey mode, provide comma-separated keys or use the key:roles format
# Examples:
#  - simple keys: URN_API_KEYS=dev-secret-1,dev-secret-2
#  - keys with roles: URN_API_KEYS=admin-key:admin|editor,reader-key:reader
URN_API_KEYS=dev-secret-1,dev-secret-2
# OIDC (reserved for future use)
# To enable OIDC, set URN_AUTH_MODE=oidc and configure:
URN_OIDC_ISSUER=
URN_OIDC_AUDIENCE=
URN_OIDC_JWKS_URL=
URN_OIDC_JWKS_TTL=3600

# Optional Kataloge (Komma-separiert, lowercase)
# URN_ALLOWED_DOMAINS=bimschg,bau
# URN_ALLOWED_OBJ_TYPES=anlage,bescheid,gutachten
# Landes-spezifische Kataloge (JSON, Vorrang vor globalen Listen)
# URN_CATALOGS_JSON={"nrw":{"domains":["bimschg"],"obj_types":["anlage"]},"by":{"domains":["bau"],"obj_types":["bescheid"]}}

# ============================================
# Phase 1: Production Hardening
# ============================================

# Logging
# Log level: DEBUG | INFO | WARNING | ERROR | CRITICAL
URN_LOG_LEVEL=INFO
# Log format: text (development) | json (production)
URN_LOG_FORMAT=text

# ============================================
# Phase 2: Federation Evolution
# ============================================

# Redis Cache (open-source, self-hosted - optional)
# Set to "true" to enable Redis caching (falls back to in-memory if unavailable)
URN_REDIS_ENABLED=false
# Redis connection URL
# URN_REDIS_URL=redis://localhost:6379/0

# ============================================
# Phase 2b: Secure Federation (mTLS)
# ============================================

# Enable mTLS for federation peer communication
# When enabled, all peer-to-peer requests use mutual TLS authentication
URN_MTLS_ENABLED=false

# CA certificate for verifying peer certificates
# URN_MTLS_CA_CERT=/path/to/ca.crt

# This instance's certificate (for presenting to peers)
# URN_MTLS_CERT=/path/to/instance.crt

# This instance's private key
# URN_MTLS_KEY=/path/to/instance.key

# Verify peer certificates (set to false only for testing)
URN_MTLS_VERIFY_PEER=true

# Minimum TLS version: TLSv1_2 | TLSv1_3
URN_MTLS_MIN_VERSION=TLSv1_2

# ============================================
# Phase 2b: Service Discovery
# ============================================

# Discovery mode: k8s (Kubernetes DNS) | manual (environment config)
URN_DISCOVERY_MODE=manual

# Kubernetes settings (when URN_DISCOVERY_MODE=k8s)
# URN_K8S_NAMESPACE=vcc-urn
# URN_K8S_SERVICE_NAME=vcc-urn-headless

# Health check interval in seconds
URN_HEALTH_CHECK_INTERVAL=30

# ============================================
# Phase 3: Föderiertes Ökosystem (Optional)
# ============================================

# OpenTelemetry Tracing (requires opentelemetry-* packages)
URN_TRACING_ENABLED=false
# OTLP collector endpoint (Jaeger, Zipkin, or any OTLP-compatible)
# URN_TRACING_ENDPOINT=http://localhost:4317
# Service name for traces
URN_TRACING_SERVICE_NAME=vcc-urn

# Open Policy Agent (OPA) for policy-based authorization
URN_OPA_ENABLED=false
# OPA server URL
# URN_OPA_URL=http://localhost:8181
# Policy document path
# URN_OPA_POLICY_PATH=v1/data/vcc/urn

# SAML 2.0 Authentication (Keycloak, etc.)
URN_SAML_ENABLED=false
# Identity Provider metadata URL
# URN_SAML_IDP_METADATA_URL=http://keycloak:8080/realms/vcc/protocol/saml/descriptor
# Service Provider entity ID
URN_SAML_SP_ENTITY_ID=vcc-urn
# Assertion Consumer Service URL
# URN_SAML_ACS_URL=https://urn.vcc.local/auth/saml/callback

# SCIM 2.0 User Provisioning
URN_SCIM_ENABLED=false
# SCIM endpoint URL
# URN_SCIM_ENDPOINT=http://keycloak:8080/admin/realms/vcc/scim/v2

# Environment name for tracing/monitoring
URN_ENVIRONMENT=development
